/* 
 * Optimizaciones CSS específicas para móviles
 * Mejora la experiencia de reproducción de video en dispositivos táctiles
 */

/* Optimizaciones para el contenedor de video en móviles */
@media (max-width: 768px) {
  .mux-video-player {
    /* Asegurar que el video sea responsivo */
    position: relative;
    width: 100%;
    height: auto;
    max-height: 50vh; /* Limitar altura en móviles */
    
    /* Optimizar el rendimiento */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    
    /* Prevenir el zoom accidental */
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* Optimizar el elemento video para móviles */
  .mux-video-player video {
    /* Hardware acceleration */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    
    /* Evitar comportamientos no deseados en iOS */
    -webkit-playsinline: true;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    
    /* Optimizar para pantallas táctiles */
    touch-action: manipulation;
    
    /* Estilo del cursor para indicar interactividad */
    cursor: pointer;
  }
  
  /* Controles del video optimizados para móviles */
  .video-controls {
    /* Hacer los controles más grandes para táctil */
    padding: 16px 12px 12px;
    
    /* Mejor contraste en móviles */
    background: linear-gradient(
      to top, 
      rgba(0, 0, 0, 0.9) 0%, 
      rgba(0, 0, 0, 0.4) 60%, 
      transparent 100%
    );
  }
  
  /* Botones de control más grandes para táctil */
  .control-button {
    min-width: 44px !important;
    min-height: 44px !important;
    padding: 12px !important;
    
    /* Feedback táctil */
    transition: all 0.2s ease;
  }
  
  .control-button:active {
    transform: scale(0.95);
    background-color: rgba(255, 255, 255, 0.3) !important;
  }
  
  /* Barra de progreso más gruesa para móviles */
  .progress-bar {
    height: 6px !important;
    cursor: pointer;
    
    /* Área de toque más grande */
    padding: 8px 0;
    margin: -8px 0;
  }
  
  .progress-bar:active .progress-handle {
    transform: scale(1.3);
  }
  
  /* Botón de reproducción central más grande */
  .center-play-button {
    width: 80px !important;
    height: 80px !important;
  }
  
  .center-play-button svg {
    width: 40px !important;
    height: 40px !important;
  }
  
  /* Texto y elementos más grandes */
  .video-title {
    font-size: 16px !important;
    line-height: 1.3;
  }
  
  .time-display {
    font-size: 14px !important;
  }
  
  /* Menú de configuración optimizado para táctil */
  .settings-menu {
    min-width: 150px !important;
    right: 8px !important;
    bottom: 60px !important;
  }
  
  .settings-menu button {
    padding: 12px 16px !important;
    font-size: 16px !important;
  }
  
  /* Ocultar elementos no esenciales en pantallas muy pequeñas */
  @media (max-width: 480px) {
    .skip-buttons {
      display: none !important;
    }
    
    .video-title {
      display: none !important;
    }
    
    .playback-rate-display {
      display: none !important;
    }
  }
  
  /* Estados de loading y error optimizados */
  .loading-spinner {
    width: 60px !important;
    height: 60px !important;
  }
  
  .error-display {
    padding: 24px !important;
    margin: 16px !important;
  }
  
  .error-display h3 {
    font-size: 18px !important;
  }
  
  .error-display p {
    font-size: 14px !important;
  }
  
  /* Optimizaciones para pantalla completa en móviles */
  .fullscreen-mobile {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 9999 !important;
    background: #000 !important;
  }
  
  .fullscreen-mobile video {
    width: 100% !important;
    height: 100% !important;
    object-fit: contain !important;
  }
  
  /* Soporte para orientation landscape en móviles */
  @media screen and (orientation: landscape) and (max-height: 600px) {
    .mux-video-player {
      max-height: 90vh;
    }
    
    .video-controls {
      padding: 12px 16px 8px;
    }
    
    .control-button {
      min-width: 40px !important;
      min-height: 40px !important;
      padding: 10px !important;
    }
  }
}

/* Optimizaciones específicas para iOS */
@supports (-webkit-touch-callout: none) {
  .mux-video-player video {
    /* Prevenir el menú contextual en iOS */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    
    /* Optimizar la reproducción en iOS */
    -webkit-playsinline: true;
    playsinline: true;
    
    /* Prevenir el zoom automático */
    -webkit-text-size-adjust: 100%;
  }
  
  /* Mejorar los controles en iOS */
  .control-button {
    /* Eliminar el highlight azul en iOS */
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Optimizar la barra de progreso para iOS */
  .progress-bar {
    /* Mejorar la precisión del toque en iOS */
    -webkit-tap-highlight-color: transparent;
  }
}

/* Optimizaciones específicas para Android */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  .mux-video-player {
    /* Optimizar el rendimiento en Android */
    -webkit-transform: translateZ(0);
    will-change: transform;
  }
  
  .control-button:active {
    /* Feedback táctil más sutil en Android */
    background-color: rgba(255, 255, 255, 0.2) !important;
  }
}

/* Mejoras de accesibilidad para móviles */
@media (pointer: coarse) {
  /* Para dispositivos con puntero grueso (táctil) */
  .control-button {
    /* Área de toque más grande */
    min-width: 48px !important;
    min-height: 48px !important;
  }
  
  .progress-bar {
    /* Barra de progreso más gruesa */
    height: 8px !important;
  }
  
  .progress-handle {
    /* Handle más grande para dedos */
    width: 20px !important;
    height: 20px !important;
  }
}

/* Optimizaciones para dispositivos con pantallas de alta densidad */
@media (-webkit-min-device-pixel-ratio: 2) {
  .loading-spinner {
    /* Spinner más nítido en pantallas retina */
    border-width: 3px !important;
  }
  
  .control-button svg {
    /* Iconos más nítidos */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
}

/* Estilos para el modo PWA */
@media (display-mode: standalone) {
  .mux-video-player {
    /* Optimizar para PWA en pantalla completa */
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom)) !important;
  }
  
  .video-controls {
    /* Respetar las áreas seguras en PWA */
    padding-bottom: calc(12px + env(safe-area-inset-bottom)) !important;
  }
}

/* Animaciones optimizadas para móviles */
@media (prefers-reduced-motion: no-preference) {
  .control-button {
    transition: transform 0.15s ease-out, background-color 0.15s ease-out;
  }
  
  .progress-handle {
    transition: transform 0.15s ease-out;
  }
}

/* Modo alto contraste para mejor visibilidad */
@media (prefers-contrast: high) {
  .video-controls {
    background: rgba(0, 0, 0, 0.95) !important;
  }
  
  .control-button {
    background-color: rgba(255, 255, 255, 0.15) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
  }
  
  .progress-bar {
    background-color: rgba(255, 255, 255, 0.4) !important;
  }
}